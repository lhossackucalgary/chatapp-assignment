(function(e){function t(t){for(var s,r,u=t[0],a=t[1],c=t[2],m=0,f=[];m<u.length;m++)r=u[m],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&f.push(o[r][0]),o[r]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,u=1;u<n.length;u++){var a=n[u];0!==o[a]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},o={app:0},i=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],a=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=a;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"11fd":function(e,t,n){},"1fd0":function(e,t,n){"use strict";n("7e30")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s,o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._m(0),n("div",{staticClass:"spacer"}),n("Users",{attrs:{uid:e.uid}}),n("MessageLog",{attrs:{uid:e.uid,usernames:e.usernames}}),n("ChatInput",{attrs:{uid:e.uid}})],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",[n("h1",[e._v("Chat App")])])}],u=(n("a9e3"),n("8e27")),a=n.n(u);s=a()(),s.on("connect",(function(){console.log(s.connected)})),s.on("connect_error",(function(){console.log("conection err"),setTimeout((function(){s.connect()}),2e3)}));var c=s,l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"users"},[n("h2",[e._v("Online")]),n("ul",e._l(e.users,(function(t){return n("li",{key:t.id,class:{mine:t.id==e.uid},style:{color:t.color}},[e._v(" "+e._s(t.name)+" ")])})),0)])},m=[],f={name:"Users",components:{},props:{uid:Number},data:function(){return{users:[]}},methods:{me_first:function(){for(var e=0;e<this.users.length;e++)if(this.users[e].id===this.uid){var t=this.users[0];this.users[0]=this.users[e],this.users[e]=t}}},mounted:function(){var e=this;c.on("online",(function(t){e.users=t,e.me_first()}))},watch:{uid:function(){this.me_first()}}},d=f,p=(n("c6b9"),n("2877")),h=Object(p["a"])(d,l,m,!1,null,"0965ed57",null),g=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message-log"},[n("ol",e._l(e.msg_log,(function(t){return n("li",{key:t.timestamp},[n("small",{class:{mine:e.uid==t.uid},style:{color:e.usernames[t.uid].color}},[e._v(" [ "+e._s(e.usernames[t.uid].name)+" ] "+e._s(new Date(t.timestamp).toLocaleDateString()+" "+new Date(t.timestamp).toLocaleTimeString())+" ")]),n("p",{class:{mine:e.uid==t.uid},style:{color:e.usernames[t.uid].color}},[e._v(" "+e._s(t.content)+" ")])])})),0)])},b=[],_={name:"MessageLog",components:{},props:{uid:Number},data:function(){return{msg_log:[],usernames:Array}},methods:{},created:function(){var e=this;c.on("usernames",(function(t){e.usernames=t})),c.on("chat message",(function(t){e.msg_log.push(t),setTimeout((function(){e.$el.scrollTop=e.$el.scrollHeight}),0)})),c.on("here chatlog",(function(t){console.log(t),e.msg_log=t})),c.emit("gimme chatlog")}},y=_,w=(n("b94f"),Object(p["a"])(y,v,b,!1,null,"d71cbe34",null)),O=w.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],attrs:{type:"text",name:"chatin",id:"chatin"},domProps:{value:e.msg},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)},input:function(t){t.target.composing||(e.msg=t.target.value)}}})])},x=[],S=(n("ac1f"),n("1276"),n("2ca0"),{name:"ChatInput",components:{},props:{uid:Number},data:function(){return{msg:""}},methods:{submit:function(){if(""!=this.msg)if(this.msg.startsWith("/"))if(/^\/name \b([a-zA-Z0-9_]{1,20})$/.test(this.msg)){var e=this.msg.split(" ")[1];console.log("new name: ".concat(e)),c.emit("change uname",e)}else if(/^\/color \b([0-9A-Fa-f]{6})$/.test(this.msg)){var t=this.msg.split(" ")[1];console.log("new color: ".concat(t)),c.emit("change color",t)}else alert("Malformed command!");else this.msg=this.msg.replaceAll(":)","😁"),this.msg=this.msg.replaceAll(":(","😞"),this.msg=this.msg.replaceAll(":o","😲"),c.emit("chat message",{uid:this.uid,content:this.msg});this.msg=""}},mounted:function(){c.on("command failed",(function(e){alert("Command Failed! ".concat(e.reason))}))}}),k=S,C=(n("1fd0"),Object(p["a"])(k,j,x,!1,null,"56e2f9da",null)),$=C.exports,A={name:"App",data:function(){return{uid:null,uname:"",usernames:[]}},components:{Users:g,MessageLog:O,ChatInput:$},created:function(){var e=this;c.on("new uid",(function(t){e.uid=t.uid,e.uname=t.username,window.localStorage.setItem("uid",e.uid),window.localStorage.setItem("uname",e.uname)})),localStorage.getItem("uid")?(this.uid=Number(localStorage.getItem("uid")),c.emit("post uid",this.uid)):c.emit("new uid")}},M=A,P=(n("034f"),Object(p["a"])(M,i,r,!1,null,null,null)),I=P.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(e){return e(I)}}).$mount("#app")},"7e30":function(e,t,n){},"85ec":function(e,t,n){},b94f:function(e,t,n){"use strict";n("11fd")},c6b9:function(e,t,n){"use strict";n("efbe")},efbe:function(e,t,n){}});
//# sourceMappingURL=app.f0e13e42.js.map